!function(t){"function"==typeof define&&define.amd?define(["jquery","modernizr"],t):window.Shuffle=t(window.jQuery,window.Modernizr)}(function(t,e,i){"use strict";function s(e,i,s){var n,o,r,l=null,a=0;s=s||{};var h=function(){a=!1===s.leading?0:t.now(),l=null,r=e.apply(n,o),n=o=null};return function(){var u=t.now();a||!1!==s.leading||(a=u);var c=i-(u-a);return n=this,o=arguments,0>=c||c>i?(clearTimeout(l),l=null,a=u,r=e.apply(n,o),n=o=null):l||!1===s.trailing||(l=setTimeout(h,c)),r}}function n(t,e,i){for(var s=0,n=t.length;n>s;s++)if(e.call(i,t[s],s,t)==={})return}function o(e,i,s){return setTimeout(t.proxy(e,i),s)}function r(t){return Math.max.apply(Math,t)}function l(t){return Math.min.apply(Math,t)}function a(e){return t.isNumeric(e)?e:0}function h(t){var e,i,s=t.length;if(!s)return t;for(;--s;)i=Math.floor(Math.random()*(s+1)),e=t[i],t[i]=t[s],t[s]=e;return t}if("object"!=typeof e)throw new Error("Shuffle.js requires Modernizr.\nhttp://vestride.github.io/Shuffle/#dependencies");var u=e.prefixed("transition"),c=e.prefixed("transitionDelay"),p=e.prefixed("transitionDuration"),d={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[u],f=e.prefixed("transform"),m=function(t){return t?t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"):""}(f),g=e.csstransforms&&e.csstransitions,y=e.csstransforms3d,v="shuffle",_="all",b=.001,C=function(t,e){this.x=a(t),this.y=a(e)};C.equals=function(t,e){return t.x===e.x&&t.y===e.y};var E=0,S=t(window),I=function(e,i){i=i||{},t.extend(this,I.options,i,I.settings),this.$el=t(e),this.element=e,this.unique="shuffle_"+E++,this._fire(I.EventType.LOADING),this._init(),o(function(){this.initialized=!0,this._fire(I.EventType.DONE)},this,16)};return I.EventType={LOADING:"loading",DONE:"done",LAYOUT:"layout",REMOVED:"removed"},I.ClassName={BASE:v,SHUFFLE_ITEM:"shuffle-item",FILTERED:"filtered",CONCEALED:"concealed"},I.options={group:_,speed:250,easing:"ease-out",itemSelector:"",sizer:null,gutterWidth:0,columnWidth:0,delimeter:null,buffer:0,initialSort:null,throttle:s,throttleTime:300,sequentialFadeDelay:150,supported:g},I.settings={useSizer:!1,itemCss:{position:"absolute",top:0,left:0,visibility:"visible"},revealAppendedDelay:300,lastSort:{},lastFilter:_,enabled:!0,destroyed:!1,initialized:!1,_animations:[],styleQueue:[]},I.Point=C,I._getItemTransformString=function(t,e){return y?"translate3d("+t.x+"px, "+t.y+"px, 0) scale3d("+e+", "+e+", 1)":"translate("+t.x+"px, "+t.y+"px) scale("+e+")"},I._getNumberStyle=function(e,i){return I._getFloat(t(e).css(i))},I._getInt=function(t){return a(parseInt(t,10))},I._getFloat=function(t){return a(parseFloat(t))},I._getOuterWidth=function(t,e){var i=t.offsetWidth;if(e){i+=I._getNumberStyle(t,"marginLeft")+I._getNumberStyle(t,"marginRight")}return i},I._getOuterHeight=function(t,e){var i=t.offsetHeight;if(e){i+=I._getNumberStyle(t,"marginTop")+I._getNumberStyle(t,"marginBottom")}return i},I._skipTransition=function(t,e,i){var s=t.style[p];t.style[p]="0ms",e.call(i);t.offsetWidth;t.style[p]=s},I.prototype._init=function(){this.$items=this._getItems(),this.sizer=this._getElementOption(this.sizer),this.sizer&&(this.useSizer=!0),this.$el.addClass(I.ClassName.BASE),this._initItems(),S.on("resize."+v+"."+this.unique,this._getResizeFunction());var t=this.$el.css(["position","overflow"]),e=I._getOuterWidth(this.element);this._validateStyles(t),this._setColumns(e),this.shuffle(this.group,this.initialSort),this.supported&&o(function(){this._setTransitions(),this.element.style[u]="height "+this.speed+"ms "+this.easing},this)},I.prototype._getResizeFunction=function(){var e=t.proxy(this._onResize,this);return this.throttle?this.throttle(e,this.throttleTime):e},I.prototype._getElementOption=function(t){return"string"==typeof t?this.$el.find(t)[0]||null:t&&t.nodeType&&1===t.nodeType?t:t&&t.jquery?t[0]:null},I.prototype._validateStyles=function(t){"static"===t.position&&(this.element.style.position="relative"),"hidden"!==t.overflow&&(this.element.style.overflow="hidden")},I.prototype._filter=function(t,e){t=t||this.lastFilter,e=e||this.$items;var i=this._getFilteredSets(t,e);return this._toggleFilterClasses(i.filtered,i.concealed),this.lastFilter=t,"string"==typeof t&&(this.group=t),i.filtered},I.prototype._getFilteredSets=function(e,i){var s=t(),o=t();return e===_?s=i:n(i,function(i){var n=t(i);this._doesPassFilter(e,n)?s=s.add(n):o=o.add(n)},this),{filtered:s,concealed:o}},I.prototype._doesPassFilter=function(e,i){if(t.isFunction(e))return e.call(i[0],i,this);var s=i.data("groups"),n=this.delimeter&&!t.isArray(s)?s.split(this.delimeter):s;return t.inArray(e,n)>-1},I.prototype._toggleFilterClasses=function(t,e){t.removeClass(I.ClassName.CONCEALED).addClass(I.ClassName.FILTERED),e.removeClass(I.ClassName.FILTERED).addClass(I.ClassName.CONCEALED)},I.prototype._initItems=function(t){t=t||this.$items,t.addClass([I.ClassName.SHUFFLE_ITEM,I.ClassName.FILTERED].join(" ")),t.css(this.itemCss).data("point",new C).data("scale",1)},I.prototype._updateItemCount=function(){this.visibleItems=this._getFilteredItems().length},I.prototype._setTransition=function(t){t.style[u]=m+" "+this.speed+"ms "+this.easing+", opacity "+this.speed+"ms "+this.easing},I.prototype._setTransitions=function(t){t=t||this.$items,n(t,function(t){this._setTransition(t)},this)},I.prototype._setSequentialDelay=function(t){this.supported&&n(t,function(t,e){t.style[c]="0ms,"+(e+1)*this.sequentialFadeDelay+"ms"},this)},I.prototype._getItems=function(){return this.$el.children(this.itemSelector)},I.prototype._getFilteredItems=function(){return this.$items.filter("."+I.ClassName.FILTERED)},I.prototype._getConcealedItems=function(){return this.$items.filter("."+I.ClassName.CONCEALED)},I.prototype._getColumnSize=function(e,i){var s;return s=t.isFunction(this.columnWidth)?this.columnWidth(e):this.useSizer?I._getOuterWidth(this.sizer):this.columnWidth?this.columnWidth:this.$items.length>0?I._getOuterWidth(this.$items[0],!0):e,0===s&&(s=e),s+i},I.prototype._getGutterSize=function(e){return t.isFunction(this.gutterWidth)?this.gutterWidth(e):this.useSizer?I._getNumberStyle(this.sizer,"marginLeft"):this.gutterWidth},I.prototype._setColumns=function(t){var e=t||I._getOuterWidth(this.element),i=this._getGutterSize(e),s=this._getColumnSize(e,i),n=(e+i)/s;Math.abs(Math.round(n)-n)<.3&&(n=Math.round(n)),this.cols=Math.max(Math.floor(n),1),this.containerWidth=e,this.colWidth=s},I.prototype._setContainerSize=function(){this.$el.css("height",this._getContainerSize())},I.prototype._getContainerSize=function(){return r(this.positions)},I.prototype._fire=function(t,e){this.$el.trigger(t+"."+v,e&&e.length?e:[this])},I.prototype._resetCols=function(){var t=this.cols;for(this.positions=[];t--;)this.positions.push(0)},I.prototype._layout=function(t,e){n(t,function(t){this._layoutItem(t,!!e)},this),this._processStyleQueue(),this._setContainerSize()},I.prototype._layoutItem=function(e,i){var s=t(e),n=s.data(),o=n.point,r=n.scale,l={width:I._getOuterWidth(e,!0),height:I._getOuterHeight(e,!0)},a=this._getItemPosition(l);C.equals(o,a)&&1===r||(n.point=a,n.scale=1,this.styleQueue.push({$item:s,point:a,scale:1,opacity:i?0:1,skipTransition:i,callfront:function(){i||s.css("visibility","visible")},callback:function(){i&&s.css("visibility","hidden")}}))},I.prototype._getItemPosition=function(t){for(var e=this._getColumnSpan(t.width,this.colWidth,this.cols),i=this._getColumnSet(e,this.cols),s=this._getShortColumn(i,this.buffer),n=new C(Math.round(this.colWidth*s),Math.round(i[s])),o=i[s]+t.height,r=this.cols+1-i.length,l=0;r>l;l++)this.positions[s+l]=o;return n},I.prototype._getColumnSpan=function(t,e,i){var s=t/e;return Math.abs(Math.round(s)-s)<.3&&(s=Math.round(s)),Math.min(Math.ceil(s),i)},I.prototype._getColumnSet=function(t,e){if(1===t)return this.positions;for(var i=e+1-t,s=[],n=0;i>n;n++)s[n]=r(this.positions.slice(n,n+t));return s},I.prototype._getShortColumn=function(t,e){for(var i=l(t),s=0,n=t.length;n>s;s++)if(t[s]>=i-e&&t[s]<=i+e)return s;return 0},I.prototype._shrink=function(e){n(e||this._getConcealedItems(),function(e){var i=t(e),s=i.data();s.scale!==b&&(s.scale=b,this.styleQueue.push({$item:i,point:s.point,scale:b,opacity:0,callback:function(){i.css("visibility","hidden")}}))},this)},I.prototype._onResize=function(){if(this.enabled&&!this.destroyed&&!this.isTransitioning){I._getOuterWidth(this.element)!==this.containerWidth&&this.update()}},I.prototype._getStylesForTransition=function(t){var e={opacity:t.opacity};return this.supported?e[f]=I._getItemTransformString(t.point,t.scale):(e.left=t.point.x,e.top=t.point.y),e},I.prototype._transition=function(e){var i=this._getStylesForTransition(e);this._startItemAnimation(e.$item,i,e.callfront||t.noop,e.callback||t.noop)},I.prototype._startItemAnimation=function(e,i,s,n){function o(e){e.target===e.currentTarget&&(t(e.target).off(d,o),n())}if(s(),!this.initialized)return e.css(i),void n();if(this.supported)e.css(i),e.on(d,o);else{var r=e.stop(!0).animate(i,this.speed,"swing",n);this._animations.push(r.promise())}},I.prototype._processStyleQueue=function(e){var i=t();n(this.styleQueue,function(t){t.skipTransition?this._styleImmediately(t):(i=i.add(t.$item),this._transition(t))},this),i.length>0&&this.initialized?(this.isTransitioning=!0,this.supported?this._whenCollectionDone(i,d,this._movementFinished):this._whenAnimationsDone(this._movementFinished)):e||o(this._layoutEnd,this),this.styleQueue.length=0},I.prototype._styleImmediately=function(t){I._skipTransition(t.$item[0],function(){t.$item.css(this._getStylesForTransition(t))},this)},I.prototype._movementFinished=function(){this.isTransitioning=!1,this._layoutEnd()},I.prototype._layoutEnd=function(){this._fire(I.EventType.LAYOUT)},I.prototype._addItems=function(t,e,i){this._initItems(t),this._setTransitions(t),this.$items=this._getItems(),this._shrink(t),n(this.styleQueue,function(t){t.skipTransition=!0}),this._processStyleQueue(!0),e?this._addItemsToEnd(t,i):this.shuffle(this.lastFilter)},I.prototype._addItemsToEnd=function(t,e){var i=this._filter(null,t),s=i.get();this._updateItemCount(),this._layout(s,!0),e&&this.supported&&this._setSequentialDelay(s),this._revealAppended(s)},I.prototype._revealAppended=function(e){o(function(){n(e,function(e){var i=t(e);this._transition({$item:i,opacity:1,point:i.data("point"),scale:1})},this),this._whenCollectionDone(t(e),d,function(){t(e).css(c,"0ms"),this._movementFinished()})},this,this.revealAppendedDelay)},I.prototype._whenCollectionDone=function(e,i,s){function n(e){e.target===e.currentTarget&&(t(e.target).off(i,n),++o===r&&s.call(l))}var o=0,r=e.length,l=this;e.on(i,n)},I.prototype._whenAnimationsDone=function(e){t.when.apply(null,this._animations).always(t.proxy(function(){this._animations.length=0,e.call(this)},this))},I.prototype.shuffle=function(t,e){this.enabled&&!this.isTransitioning&&(t||(t=_),this._filter(t),this._updateItemCount(),this._shrink(),this.sort(e))},I.prototype.sort=function(t){if(this.enabled&&!this.isTransitioning){this._resetCols();var e=t||this.lastSort,i=this._getFilteredItems().sorted(e);this._layout(i),this.lastSort=e}},I.prototype.update=function(t){this.enabled&&!this.isTransitioning&&(t||this._setColumns(),this.sort())},I.prototype.layout=function(){this.update(!0)},I.prototype.appended=function(t,e,i){this._addItems(t,!0===e,!1!==i)},I.prototype.disable=function(){this.enabled=!1},I.prototype.enable=function(t){this.enabled=!0,!1!==t&&this.update()},I.prototype.remove=function(e){function i(){e.remove(),this.$items=this._getItems(),this._updateItemCount(),this._fire(I.EventType.REMOVED,[e,this]),e=null}e.length&&e.jquery&&(this._toggleFilterClasses(t(),e),this._shrink(e),this.sort(),this.$el.one(I.EventType.LAYOUT+"."+v,t.proxy(i,this)))},I.prototype.destroy=function(){S.off("."+this.unique),this.$el.removeClass(v).removeAttr("style").removeData(v),this.$items.removeAttr("style").removeData("point").removeData("scale").removeClass([I.ClassName.CONCEALED,I.ClassName.FILTERED,I.ClassName.SHUFFLE_ITEM].join(" ")),this.$items=null,this.$el=null,this.sizer=null,this.element=null,this.destroyed=!0},t.fn.shuffle=function(e){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var s=t(this),n=s.data(v);n?"string"==typeof e&&n[e]&&n[e].apply(n,i):(n=new I(this,e),s.data(v,n))})},t.fn.sorted=function(e){var s=t.extend({},t.fn.sorted.defaults,e),n=this.get(),o=!1;return n.length?s.randomize?h(n):(t.isFunction(s.by)&&n.sort(function(e,n){if(o)return 0;var r=s.by(t(e)),l=s.by(t(n));return r===i&&l===i?(o=!0,0):l>r||"sortFirst"===r||"sortLast"===l?-1:r>l||"sortLast"===r||"sortFirst"===l?1:0}),o?this.get():(s.reverse&&n.reverse(),n)):[]},t.fn.sorted.defaults={reverse:!1,by:null,randomize:!1},I}),function(t){"function"==typeof define&&define.amd?define(["jquery","jui/core","jui/widget","jui/position"],t):t(jQuery)}(function(t){"use strict";t.support.touch="ontouchend"in document;var e={};e.options=function(){var e=t.ui.keyCode;return{radio:!1,singlePlaceholder:"Select an option",checkbox:!1,displayText:"{0} of {1} selected",maxDisplay:4,maxSelect:0,multiplePlaceholder:"Select options",selectallText:"Select All",closeOnWindowScroll:!0,closeOnWindowResize:!0,itemCls:"pq-select-item ui-corner-all ui-state-default",bootstrap:{on:!1,btn:"btn btn-default",popupCont:"panel panel-default",selectCls:"label label-info",itemCls:"label label-default",closeIcon:"glyphicon glyphicon-remove",searchIcon:"glyphicon glyphicon-search",hoverCls:""},position:{my:"left top",at:"left bottom",collision:"flipfit"},kcOpen:[e.DOWN,e.ENTER,e.UP],deselect:!0,hoverCls:"pq-state-hover",search:!0,searchRule:"contain",_selectCls:"pq-state-select",selectCls:"ui-state-highlight",width:null,maxSelectReach:null,maxSelectExceed:null}}(),e._setButtonWidth=function(){var t=this.element;t.show();var e=this.options,i=e.width?e.width:t[0].offsetWidth,i=1*i==i?i+"px":i;t.hide(),this.$button[0].style.width=i},e._create=function(){var e=this,i=this.options,s=i.bootstrap,n=s.on,o=this.element,r=o.attr("name"),l=o.attr("multiple"),a=t(["<div class='pq-select-button pq-no-capture ",n?s.btn:"ui-state-default ui-widget ui-corner-all","' "," data-name='",r,"' tabindex='0'>",l?"":"<span class='pq-icon "+(n?"caret":"ui-icon ui-icon-triangle-1-s")+"'></span>","<div class='pq-select-text'></div>","</div>"].join(""));n&&(i.selectCls+=" "+s.selectCls,i.itemCls+=" "+s.itemCls),this.$button=a,this.multiple=!!l,this.selector="label.pq-select-option-label.ui-state-enable:visible",this._setButtonWidth(),o.after(a),a.attr("name",r),a.addClass(o.attr("class")),o.addClass("pq-select"),this._extractData(),this._createPopup(),this._createMenu(),a.on({click:function(s){if(!i.disabled){var n=t(this).parent(".pq-select-item"),o=parseInt(n.attr("data-id"));return e.select(o,!1),e.setText(),e.focus(),e.triggerChange(),!1}}},".pq-item-close"),a.on({click:function(t){if(!i.disabled)return e.toggle(),!1},focus:function(e){i.disabled||t(this).addClass("ui-state-hover")},blur:function(e){t(this).removeClass("ui-state-hover")},mousedown:function(e){i.disabled||t(this).addClass("ui-state-active")},mouseup:function(e){i.disabled||t(this).removeClass("ui-state-active")},keydown:function(s){if(!i.disabled){var n=s.keyCode,o=i.kcOpen,r=t.ui.keyCode;-1!==t.inArray(n,o)?e.open():n===r.ESCAPE?e.close():n===r.SPACE&&e.toggle()}}}),this.setText();var h=this.eventNamespace;t(window).on("resize"+h,function(t){e.onWindowResize(t)}),t(window).on("scroll"+h,function(t){e.onWindowScroll(t)})},e.onWindowResize=function(){this.options.closeOnWindowResize&&this.close()},e.onWindowScroll=function(){this.options.closeOnWindowScroll&&this.close()},e.focus=function(){var e=this;t.support.touch||e.$search.focus()},t.paramquery=t.paramquery||{},t.paramquery.scrollView=function(e){var i=e[0],s=i.offsetTop,n=i.offsetHeight,o=i.offsetParent,r=o.scrollTop,l=o.clientHeight;n+s>l+r?t(o).scrollTop(n+s-l):s<r&&t(o).scrollTop(s)},t.paramquery.pageMove=function(e,i,s){var n,o=e[0].offsetHeight,r=e[0].offsetParent,l=r.clientHeight;do{if(n=e[s?"nextAll":"prevAll"](i),!n.length)break;n=t(n[0]),o+=n[0].offsetHeight,e=n}while(o<l);return t.paramquery.scrollView(e),e},e._move=function(e){var i=this.$lastlabelHighlight;if(i&&i.length){var s=i[e?"nextAll":"prevAll"](this.selector);s.length&&(s=t(s[0]),this._highlight(s))}else this._hightlight()},e._onkeydown=function(e){var i=e.keyCode,s=t.ui.keyCode;if(i===s.DOWN||i===s.UP)return this._move(i===s.DOWN),!1;if(i===s.PAGE_DOWN||i===s.PAGE_UP){var n=t.paramquery.pageMove(this.$lastlabelHighlight,this.selector,i===s.PAGE_DOWN);return this._highlight(n),!1}if(i===s.TAB)return this.close(),!1;if(i===s.ESCAPE)this.close();else if(i===s.ENTER&&this.$lastlabelHighlight)return this.$lastlabelHighlight.trigger("label_changed"),!1},e.search=function(t){for(var e=this.data,i=this.options.searchRule,s="contain"===i,n=0,o=e.length;n<o;n++){var r=e[n],l=r.text.toUpperCase(),a=l.indexOf(t);r.searchIndx=null,-1===a?r.hidden=!0:!1===s&&a>0?r.hidden=!0:(r.hidden=!1,r.searchIndx=a)}},e._onkeyupsearch=function(e){var i=t(e.target),s=t.trim(i.val()).toUpperCase(),n=(this.data,e.keyCode),o=t.ui.keyCode,r=[o.DOWN,o.UP,o.ENTER,o.PAGE_DOWN,o.PAGE_UP];-1===t.inArray(n,r)&&(this.search(s),this._createMenu(),this.positionPopup())},e._onChange=function(t,e){var i=this,s=i.options,n=this.multiple,o=s.maxSelect,r=i.selectIndx;if(n){if(e&&o&&r.length>=o)return i._trigger("maxSelectExceed",null,{option:i.$options[t]}),i.focus(),!1}else if(r.length){var l=r[0];if(t===l)return!1;e&&this.select(l,!1)}this.select(t,e),i.setText(),i.setSelectAllState(),n?o&&r.length>=o?!1!==i._trigger("maxSelectReach",null,{option:i.$options[t]})&&i.close():i.focus():i.close(),this.triggerChange()},e.setSelectAllState=function(){var t=this.$popup.find(".pq-select-all input");if(t.length){for(var e=this.data,i=0,s=0,n=0,o=e.length;n<o;n++){var r=e[n],l=r.selected;r.disabled||(i++,l&&s++)}i===s?t.prop("checked",!0):t.prop("checked",!1)}},e.getInstance=function(){return{select:this}},e.select=function(e,i){var s=this,n=s.selectIndx,o=this.options,r=this.data[e],l=t(s.$options[e]),a=s.$popup.find("#pq-option-"+this.uuid+"-"+e),h=a.find("input");if(a[i?"addClass":"removeClass"](o._selectCls+" "+o.selectCls),h.prop("checked",i),r.selected=i,s.multiple){if(i)n.push(e);else{var u=t.inArray(e,n);n.splice(u,1)}l.prop("selected",i)}else i?(n.length&&(this.data[n[0]].selected=!1),n[0]=e,l.prop("selected",i)):(s.selectIndx=[0],this.data[0].selected=!0,t(s.$options[0]).prop("selected",!0))},e.triggerChange=function(){this.element.trigger("change")},e._extractData=function(){var e,i=this.data=[],s=this.element,n=s.find("option,optgroup"),o=!1,r=!1;this.$options=s.find("option");for(var l=0,a=n.length;l<a;l++){var h=n[l],u=t(h);if("optgroup"!=h.nodeName.toLowerCase()){var c=u.prop("selected"),p=u.prop("disabled");!p&&o&&(p=r);var d=u.text();i.push({selected:c,disabled:p,text:d,optgroup:e})}else e=u.attr("label"),o=!0,r=u.prop("disabled")}this.grouping=o},e.refresh=function(){this.search(""),this._setButtonWidth(),this._createPopup(),this._createMenu(),this.setText()},e.refreshData=function(){this._extractData(),this.refresh()},e._createPopup=function(){var e=this,i=(this.data,this.options),s=i.bootstrap,n=s.on,o=e.multiple,r="",l="";o&&i.selectallText&&!i.maxSelect&&(l=["<label class='pq-select-all ui-widget-header ui-corner-all'>","<span class='ui-icon ui-icon-close ",n?s.closeIcon:"","'></span>","<input type='checkbox' >",i.selectallText,"</label>"].join("")),i.search&&(r=["<div class='pq-select-search-div ui-corner-all'>","<span class='ui-icon ui-icon-search ",n?s.searchIcon:"","' />","<div class='pq-select-search-div1'>","<input type='text' class='pq-select-search-input' autocomplete='off' />","</div>","</div>"].join(""));var a=t(["<div class='pq-select-popup-cont ",n?s.popupCont:"","'>","<div class='pq-select-popup ui-widget-content ui-corner-all'>",l,r,"</div><div class='pq-select-shadow-fix'></div></div>"].join(""));a.css({"font-family":this.$button.css("font-family"),"font-size":this.$button.css("font-size")});var h=a.children("div.pq-select-popup");h.on({keydown:function(t){return e._onkeydown(t)}}),h.find(".ui-icon-close").on({click:function(t){return e.close(),!1}}),h.on({change:function(i){for(var s=(e.element,t(this)),n=!!s.prop("checked"),o=e.data,r=e.$options,l=0;l<o.length;l++){var a=o[l];a.disabled||a.selected===n||(a.selected=n,t(r[l]).prop("selected",n))}e._createMenu(),e.setText(),e.focus(),e.triggerChange()}},"label.pq-select-all input"),h.on({mouseenter:function(i){e._highlight(t(this))},label_changed:function(s){var n=t(this),o=n.attr("id");if(o){var r=!n.hasClass(i._selectCls),l=parseInt(o.split("-")[3]);return e._onChange(l,r)}}},"label.pq-select-option-label.ui-state-enable"),o&&i.checkbox||!o&&i.radio?h.on({click:function(){t(this).closest("label").trigger("label_changed")}},"label.pq-select-option-label.ui-state-enable input"):h.on({click:function(e){t(this).trigger("label_changed")}},"label.pq-select-option-label.ui-state-enable"),this.$popupCont&&this.$popupCont.remove(),this.$popupCont=a,this.$popup=h,this.$search=h.find(".pq-select-search-input").on({keyup:function(t){return e._onkeyupsearch(t)}}),t(document.body).append(a),this.setSelectAllState()},e._createMenu=function(){for(var e,i,s,n,o=this,r=this.data,l=this.uuid,a=this.options,h=a.search?t.trim(this.$search.val()).length:0,u=" "+a._selectCls+" "+a.selectCls+" ",c=o.multiple,p=c?a.checkbox?'type="checkbox"':"":a.radio?'type="radio"':"",d=p?"pq-left-input":this.grouping?"pq-left-group":"",f=o.selectIndx=[],m=[],g=0;g<r.length;g++){var y=r[g],i=y.disabled,v=y.selected,_=y.text,b=y.optgroup;if(v&&f.push(g),!y.hidden){n!==b&&(m.push("<div class='pq-select-optgroup'>",b,"</div>"),n=b);var C=v?' checked="checked" ':"",E=v?u:"",S=i?' disabled="disabled" ':"",s=i?"ui-state-disabled":"ui-state-enable";0===g&&""===_||(h&&(e=y.searchIndx,_=_.substr(0,e)+"<span class='pq-select-search-highlight'>"+_.substr(e,h)+"</span>"+_.substr(e+h,_.length)),m.push("<label class='pq-select-option-label ",E,s,"'",""," id='pq-option-",l,"-",g,"'>",p?"<input "+p+" "+C+S+" >":"","<span class='",d,"'>",_,"</span>","</label>"))}}var I=t(["<div class='pq-select-menu' >",m.join(""),"</div>"].join(""));this.$menu&&this.$menu.remove(),this.$popup.append(I),delete this.$lastlabelHighlight,this.$menu=I,this._highlight()},e._highlight=function(e){var i=this.options.hoverCls;e&&e.length||(e=this.$menu.find("label.pq-select-option-label.ui-state-enable:visible:first")),e.length&&(this.$lastlabelHighlight&&this.$lastlabelHighlight.removeClass(i),e.addClass(i),this.$lastlabelHighlight=e,t.paramquery.scrollView(e))},e._setPopupWidth=function(){var t=this.$button[0].offsetWidth;this.$popupCont.width(t)},e.positionPopup=function(){var e=this.options,i=this.$button,s=t.extend({of:i},e.position),n=this.$popupCont;this._setPopupWidth(),n.position(s)},e.isOpen=function(){return!(!this.$popupCont||"block"!=this.$popupCont.css("display"))},e.open=function(){var e=this,i=this.$popupCont;this.$menu,this.selectIndx;if(this.isOpen())return!1;i.show(),this.positionPopup(),this._highlight(),t(document).on("mousedown"+e.eventNamespace,function(i){var s=t(i.target);s.closest(e.$popup).length||s.closest(e.$button).length||e.close()}),this.options.search?e.focus():i.attr("tabindex","-1").focus()},e.setText=function(){var t,e=this.$button,i=e.find(".pq-select-text"),s=this.element,n=this.options,o=n.deselect,r=this.data,l=n.itemCls,a=n.bootstrap,h=a.on?a.closeIcon:"ui-icon ui-icon-close",u=function(t){return o?["<div><span class='",l,"' data-id = '",t,"'>","<span class='pq-select-item-text'>",r[t].text,"</span>","<span class='pq-item-close ",h,"'></span>","</span></div>"].join(""):r[t].text},c=this.selectIndx;if(this.multiple){e.addClass("pq-select-multiple");var p=c.length,d=n.maxDisplay,f=r.length;if(p>0)if(p<=d){for(var m=[],g=0;g<p;g++){var y=c[g];m.push(u(y))}t=o?m.join(""):m.join(", ")}else t=n.displayText,t=t.replace("{0}",c.length),t=t.replace("{1}",f);else(t=s.attr("data-placeholder"))||(t=n.multiplePlaceholder)}else{e.addClass("pq-select-single"),i.css("maxWidth",e.width()-16);var y=c[0],t=y>=0?r[y].text:"";null!=t&&""!==t?t=u(y):(t=s.attr("data-placeholder"))||(t=n.singlePlaceholder)}i.html(t),this.multiple||i.find(".pq-select-item-text").css({maxWidth:e.width()-35}),this.positionPopup()},e.close=function(e){this.isOpen()&&(e=e||{},!1!==e.focus&&this.$button.focus(),this.$popupCont.hide()),t(document).off(this.eventNamespace)},e.toggle=function(){this.isOpen()?this.close():this.open()},e.disable=function(){this.option({disabled:!0})},e.enable=function(){this.option({disabled:!1})},e._destroy=function(){this.$popupCont.remove(),this.$button.remove(),this.element.removeClass("pq-select").show();var e=this.eventNamespace;t(document).off(e),t(window).off(e)},e.destroy=function(){this._super();for(var t in this)delete this[t]},e._setOption=function(t,e){"disabled"==t&&(!0===e?(this.close(),this.$button.addClass("ui-state-disabled")):!1===e&&this.$button.removeClass("ui-state-disabled")),this._super(t,e)},t.widget("paramquery.pqSelect",e)}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Shuffle=e()}(this,function(){"use strict";function t(){}function e(){}function i(t){return parseFloat(t)||0}function s(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.getComputedStyle(t,null),n=i(s[e]);return x||"width"!==e?x||"height"!==e||(n+=i(s.paddingTop)+i(s.paddingBottom)+i(s.borderTopWidth)+i(s.borderBottomWidth)):n+=i(s.paddingLeft)+i(s.paddingRight)+i(s.borderLeftWidth)+i(s.borderRightWidth),n}function n(t,e){var i=Object.assign({},D,e),s=Array.from(t),n=!1;return t.length?i.randomize?function(t){for(var e=t.length;e;){e-=1;var i=Math.floor(Math.random()*(e+1)),s=t[i];t[i]=t[e],t[e]=s}return t}(t):("function"==typeof i.by?t.sort(function(t,e){if(n)return 0;var s=i.by(t[i.key]),o=i.by(e[i.key]);return void 0===s&&void 0===o?(n=!0,0):s<o||"sortFirst"===s||"sortLast"===o?-1:s>o||"sortLast"===s||"sortFirst"===o?1:0}):"function"==typeof i.compare&&t.sort(i.compare),n?s:(i.reverse&&t.reverse(),t)):[]}function o(t){return!!A[t]&&(A[t].element.removeEventListener(z,A[t].listener),A[t]=null,!0)}function r(t,e){var i=z+(F+=1),s=function(t){t.currentTarget===t.target&&(o(i),e(t))};return t.addEventListener(z,s),A[i]={element:t,listener:s},i}function l(t){return Math.max.apply(Math,t)}function a(t,e,i,s){var n=t/e;return Math.abs(Math.round(n)-n)<s&&(n=Math.round(n)),Math.min(Math.ceil(n),i)}function h(t,e,i){if(1===e)return t;for(var s=[],n=0;n<=i-e;n++)s.push(l(t.slice(n,n+e)));return s}function u(t,e){for(var i,s=(i=t,Math.min.apply(Math,i)),n=0,o=t.length;n<o;n++)if(t[n]>=s-e&&t[n]<=s+e)return n;return 0}function c(t,e){var i={};t.forEach(function(t){i[t.top]?i[t.top].push(t):i[t.top]=[t]});var s=[],n=[],o=[];return Object.keys(i).forEach(function(t){var r=i[t];n.push(r);var l=r[r.length-1],a=l.left+l.width,h=Math.round((e-a)/2),u=r,c=!1;if(h>0){var p=[];(c=r.every(function(t){var e=new E(t.left+h,t.top,t.width,t.height,t.id),i=!s.some(function(t){return E.intersects(e,t)});return p.push(e),i}))&&(u=p)}if(!c){var d=void 0;if(r.some(function(t){return s.some(function(e){var i=E.intersects(t,e);return i&&(d=e),i})})){var f=o.findIndex(function(t){return t.includes(d)});o.splice(f,1,n[f])}}s=s.concat(u),o.push(u)}),[].concat.apply([],o).sort(function(t,e){return t.id-e.id}).map(function(t){return new C(t.left,t.top)})}function p(t){return Array.from(new Set(t))}t.prototype={on:function(t,e,i){var s=this.e||(this.e={});return(s[t]||(s[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){function s(){n.off(t,s),e.apply(i,arguments)}var n=this;return s._=e,this.on(t,s,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),s=0,n=i.length;s<n;s++)i[s].fn.apply(i[s].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),s=i[t],n=[];if(s&&e)for(var o=0,r=s.length;o<r;o++)s[o].fn!==e&&s[o].fn._!==e&&n.push(s[o]);return n.length?i[t]=n:delete i[t],this}};var d=t,f="undefined"!=typeof Element?Element.prototype:{},m=f.matches||f.matchesSelector||f.webkitMatchesSelector||f.mozMatchesSelector||f.msMatchesSelector||f.oMatchesSelector,g=function(t,e){if(!t||1!==t.nodeType)return!1;if(m)return m.call(t,e);for(var i=t.parentNode.querySelectorAll(e),s=0;s<i.length;s++)if(i[s]==t)return!0;return!1},y=function(t,e){function i(){r=0,l=+new Date,o=t.apply(s,n),s=null,n=null}var s,n,o,r,l=0;return function(){s=this,n=arguments;var t=new Date-l;return r||(t>=e?i():r=setTimeout(i,e-t)),o}},v=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},_=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),b=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},C=function(){function t(e,s){v(this,t),this.x=i(e),this.y=i(s)}return _(t,null,[{key:"equals",value:function(t,e){return t.x===e.x&&t.y===e.y}}]),t}(),E=function(){function t(e,i,s,n,o){v(this,t),this.id=o,this.left=e,this.top=i,this.width=s,this.height=n}return _(t,null,[{key:"intersects",value:function(t,e){return t.left<e.left+e.width&&e.left<t.left+t.width&&t.top<e.top+e.height&&e.top<t.top+t.height}}]),t}(),S={BASE:"shuffle",SHUFFLE_ITEM:"shuffle-item",VISIBLE:"shuffle-item--visible",HIDDEN:"shuffle-item--hidden"},I=0,T=function(){function t(e){v(this,t),I+=1,this.id=I,this.element=e,this.isVisible=!0,this.isHidden=!1}return _(t,[{key:"show",value:function(){this.isVisible=!0,this.element.classList.remove(S.HIDDEN),this.element.classList.add(S.VISIBLE),this.element.removeAttribute("aria-hidden")}},{key:"hide",value:function(){this.isVisible=!1,this.element.classList.remove(S.VISIBLE),this.element.classList.add(S.HIDDEN),this.element.setAttribute("aria-hidden",!0)}},{key:"init",value:function(){this.addClasses([S.SHUFFLE_ITEM,S.VISIBLE]),this.applyCss(t.Css.INITIAL),this.scale=t.Scale.VISIBLE,this.point=new C}},{key:"addClasses",value:function(t){var e=this;t.forEach(function(t){e.element.classList.add(t)})}},{key:"removeClasses",value:function(t){var e=this;t.forEach(function(t){e.element.classList.remove(t)})}},{key:"applyCss",value:function(t){var e=this;Object.keys(t).forEach(function(i){e.element.style[i]=t[i]})}},{key:"dispose",value:function(){this.removeClasses([S.HIDDEN,S.VISIBLE,S.SHUFFLE_ITEM]),this.element.removeAttribute("style"),this.element=null}}]),t}();T.Css={INITIAL:{position:"absolute",top:0,left:0,visibility:"visible","will-change":"transform"},VISIBLE:{before:{opacity:1,visibility:"visible"},after:{transitionDelay:""}},HIDDEN:{before:{opacity:0},after:{visibility:"hidden",transitionDelay:""}}},T.Scale={VISIBLE:1,HIDDEN:.001};var w=document.body||document.documentElement,k=document.createElement("div");k.style.cssText="width:10px;padding:2px;box-sizing:border-box;",w.appendChild(k);var x="10px"===window.getComputedStyle(k,null).width;w.removeChild(k);var D={reverse:!1,by:null,compare:null,randomize:!1,key:"element"},A={},z="transitionend",F=0,L=0,$=function(t){function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,i);var s=b(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));s.options=Object.assign({},i.options,e),s.options.delimeter&&(s.options.delimiter=s.options.delimeter),s.lastSort={},s.group=i.ALL_ITEMS,s.lastFilter=i.ALL_ITEMS,s.isEnabled=!0,s.isDestroyed=!1,s.isInitialized=!1,s._transitions=[],s.isTransitioning=!1,s._queue=[];var n=s._getElementOption(t);if(!n)throw new TypeError("Shuffle needs to be initialized with an element.");return s.element=n,s.id="shuffle_"+L,L+=1,s._init(),s.isInitialized=!0,s}
return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,d),_(i,[{key:"_init",value:function(){if(this.items=this._getItems(),this.options.sizer=this._getElementOption(this.options.sizer),this.element.classList.add(i.Classes.BASE),this._initItems(this.items),this._onResize=this._getResizeFunction(),window.addEventListener("resize",this._onResize),"complete"!==document.readyState){var t=this.layout.bind(this);window.addEventListener("load",function e(){window.removeEventListener("load",e),t()})}var e=window.getComputedStyle(this.element,null),s=i.getSize(this.element).width;this._validateStyles(e),this._setColumns(s),this.filter(this.options.group,this.options.initialSort),this.element.offsetWidth,this.setItemTransitions(this.items),this.element.style.transition="height "+this.options.speed+"ms "+this.options.easing}},{key:"_getResizeFunction",value:function(){var t=this._handleResize.bind(this);return this.options.throttle?this.options.throttle(t,this.options.throttleTime):t}},{key:"_getElementOption",value:function(t){return"string"==typeof t?this.element.querySelector(t):t&&t.nodeType&&1===t.nodeType?t:t&&t.jquery?t[0]:null}},{key:"_validateStyles",value:function(t){"static"===t.position&&(this.element.style.position="relative"),"hidden"!==t.overflow&&(this.element.style.overflow="hidden")}},{key:"_filter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastFilter,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.items,i=this._getFilteredSets(t,e);return this._toggleFilterClasses(i),this.lastFilter=t,"string"==typeof t&&(this.group=t),i}},{key:"_getFilteredSets",value:function(t,e){var s=this,n=[],o=[];return t===i.ALL_ITEMS?n=e:e.forEach(function(e){s._doesPassFilter(t,e.element)?n.push(e):o.push(e)}),{visible:n,hidden:o}}},{key:"_doesPassFilter",value:function(t,e){function s(t){return o.includes(t)}if("function"==typeof t)return t.call(e,e,this);var n=e.getAttribute("data-"+i.FILTER_ATTRIBUTE_KEY),o=this.options.delimiter?n.split(this.options.delimiter):JSON.parse(n);return Array.isArray(t)?this.options.filterMode===i.FilterMode.ANY?t.some(s):t.every(s):o.includes(t)}},{key:"_toggleFilterClasses",value:function(t){var e=t.visible,i=t.hidden;e.forEach(function(t){t.show()}),i.forEach(function(t){t.hide()})}},{key:"_initItems",value:function(t){t.forEach(function(t){t.init()})}},{key:"_disposeItems",value:function(t){t.forEach(function(t){t.dispose()})}},{key:"_updateItemCount",value:function(){this.visibleItems=this._getFilteredItems().length}},{key:"setItemTransitions",value:function(t){var e=this.options,i=e.speed,s=e.easing,n=this.options.useTransforms?["transform"]:["top","left"],o=Object.keys(T.Css.HIDDEN.before).map(function(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})}),r=n.concat(o).join();t.forEach(function(t){t.element.style.transitionDuration=i+"ms",t.element.style.transitionTimingFunction=s,t.element.style.transitionProperty=r})}},{key:"_getItems",value:function(){var t=this;return Array.from(this.element.children).filter(function(e){return g(e,t.options.itemSelector)}).map(function(t){return new T(t)})}},{key:"_mergeNewItems",value:function(t){var e=Array.from(this.element.children);return n(this.items.concat(t),{by:function(t){return e.indexOf(t)}})}},{key:"_getFilteredItems",value:function(){return this.items.filter(function(t){return t.isVisible})}},{key:"_getConcealedItems",value:function(){return this.items.filter(function(t){return!t.isVisible})}},{key:"_getColumnSize",value:function(t,e){var s=void 0;return 0===(s="function"==typeof this.options.columnWidth?this.options.columnWidth(t):this.options.sizer?i.getSize(this.options.sizer).width:this.options.columnWidth?this.options.columnWidth:this.items.length>0?i.getSize(this.items[0].element,!0).width:t)&&(s=t),s+e}},{key:"_getGutterSize",value:function(t){return"function"==typeof this.options.gutterWidth?this.options.gutterWidth(t):this.options.sizer?s(this.options.sizer,"marginLeft"):this.options.gutterWidth}},{key:"_setColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.getSize(this.element).width,e=this._getGutterSize(t),s=this._getColumnSize(t,e),n=(t+e)/s;Math.abs(Math.round(n)-n)<this.options.columnThreshold&&(n=Math.round(n)),this.cols=Math.max(Math.floor(n),1),this.containerWidth=t,this.colWidth=s}},{key:"_setContainerSize",value:function(){this.element.style.height=this._getContainerSize()+"px"}},{key:"_getContainerSize",value:function(){return l(this.positions)}},{key:"_getStaggerAmount",value:function(t){return Math.min(t*this.options.staggerAmount,this.options.staggerAmountMax)}},{key:"_dispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isDestroyed||(e.shuffle=this,this.emit(t,e))}},{key:"_resetCols",value:function(){var t=this.cols;for(this.positions=[];t;)t-=1,this.positions.push(0)}},{key:"_layout",value:function(t){var e=this,i=this._getNextPositions(t),s=0;t.forEach(function(t,n){function o(){t.applyCss(T.Css.VISIBLE.after)}if(C.equals(t.point,i[n])&&!t.isHidden)return t.applyCss(T.Css.VISIBLE.before),void o();t.point=i[n],t.scale=T.Scale.VISIBLE,t.isHidden=!1;var r=e.getStylesForTransition(t,T.Css.VISIBLE.before);r.transitionDelay=e._getStaggerAmount(s)+"ms",e._queue.push({item:t,styles:r,callback:o}),s+=1})}},{key:"_getNextPositions",value:function(t){var e=this;if(this.options.isCentered){var s=t.map(function(t,s){var n=i.getSize(t.element,!0),o=e._getItemPosition(n);return new E(o.x,o.y,n.width,n.height,s)});return this.getTransformedPositions(s,this.containerWidth)}return t.map(function(t){return e._getItemPosition(i.getSize(t.element,!0))})}},{key:"_getItemPosition",value:function(t){return function(t){for(var e=t.itemSize,i=t.positions,s=t.gridSize,n=t.total,o=t.threshold,r=t.buffer,l=a(e.width,s,n,o),c=h(i,l,n),p=u(c,r),d=new C(s*p,c[p]),f=c[p]+e.height,m=0;m<l;m++)i[p+m]=f;return d}({itemSize:t,positions:this.positions,gridSize:this.colWidth,total:this.cols,threshold:this.options.columnThreshold,buffer:this.options.buffer})}},{key:"getTransformedPositions",value:function(t,e){return c(t,e)}},{key:"_shrink",value:function(){var t=this,e=0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._getConcealedItems()).forEach(function(i){function s(){i.applyCss(T.Css.HIDDEN.after)}if(i.isHidden)return i.applyCss(T.Css.HIDDEN.before),void s();i.scale=T.Scale.HIDDEN,i.isHidden=!0;var n=t.getStylesForTransition(i,T.Css.HIDDEN.before);n.transitionDelay=t._getStaggerAmount(e)+"ms",t._queue.push({item:i,styles:n,callback:s}),e+=1})}},{key:"_handleResize",value:function(){this.isEnabled&&!this.isDestroyed&&this.update()}},{key:"getStylesForTransition",value:function(t,e){var i=Object.assign({},e);if(this.options.useTransforms){var s=this.options.roundTransforms?Math.round(t.point.x):t.point.x,n=this.options.roundTransforms?Math.round(t.point.y):t.point.y;i.transform="translate("+s+"px, "+n+"px) scale("+t.scale+")"}else i.left=t.point.x+"px",i.top=t.point.y+"px";return i}},{key:"_whenTransitionDone",value:function(t,e,i){var s=r(t,function(t){e(),i(null,t)});this._transitions.push(s)}},{key:"_getTransitionFunction",value:function(t){var e=this;return function(i){t.item.applyCss(t.styles),e._whenTransitionDone(t.item.element,t.callback,i)}}},{key:"_processQueue",value:function(){this.isTransitioning&&this._cancelMovement();var t=this.options.speed>0,e=this._queue.length>0;e&&t&&this.isInitialized?this._startTransitions(this._queue):e?(this._styleImmediately(this._queue),this._dispatch(i.EventType.LAYOUT)):this._dispatch(i.EventType.LAYOUT),this._queue.length=0}},{key:"_startTransitions",value:function(t){var i=this;this.isTransitioning=!0,function(t,i,s){function n(t){return function(e,i){if(!r){if(e)return s(e,l),void(r=!0);l[t]=i,--o||s(null,l)}}}s||("function"==typeof i?(s=i,i=null):s=e);var o=t&&t.length;if(!o)return s(null,[]);var r=!1,l=new Array(o);t.forEach(i?function(t,e){t.call(i,n(e))}:function(t,e){t(n(e))})}(t.map(function(t){return i._getTransitionFunction(t)}),this._movementFinished.bind(this))}},{key:"_cancelMovement",value:function(){this._transitions.forEach(o),this._transitions.length=0,this.isTransitioning=!1}},{key:"_styleImmediately",value:function(t){if(t.length){var e=t.map(function(t){return t.item.element});i._skipTransitions(e,function(){t.forEach(function(t){t.item.applyCss(t.styles),t.callback()})})}}},{key:"_movementFinished",value:function(){this._transitions.length=0,this.isTransitioning=!1,this._dispatch(i.EventType.LAYOUT)}},{key:"filter",value:function(t,e){this.isEnabled&&((!t||t&&0===t.length)&&(t=i.ALL_ITEMS),this._filter(t),this._shrink(),this._updateItemCount(),this.sort(e))}},{key:"sort",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastSort;if(this.isEnabled){this._resetCols();var e=n(this._getFilteredItems(),t);this._layout(e),this._processQueue(),this._setContainerSize(),this.lastSort=t}}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isEnabled&&(t||this._setColumns(),this.sort())}},{key:"layout",value:function(){this.update(!0)}},{key:"add",value:function(t){var e=this,i=p(t).map(function(t){return new T(t)});this._initItems(i),this._resetCols();var s=n(this._mergeNewItems(i),this.lastSort),o=this._filter(this.lastFilter,s),r=function(t){return i.includes(t)},l=function(t){t.scale=T.Scale.HIDDEN,t.isHidden=!0,t.applyCss(T.Css.HIDDEN.before),t.applyCss(T.Css.HIDDEN.after)},a=this._getNextPositions(o.visible);o.visible.forEach(function(t,i){r(t)&&(t.point=a[i],l(t),t.applyCss(e.getStylesForTransition(t,{})))}),o.hidden.forEach(function(t){r(t)&&l(t)}),this.element.offsetWidth,this.setItemTransitions(i),this.items=this._mergeNewItems(i),this.filter(this.lastFilter)}},{key:"disable",value:function(){this.isEnabled=!1}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isEnabled=!0,t&&this.update()}},{key:"remove",value:function(t){var e=this;if(t.length){var s=p(t),n=s.map(function(t){return e.getItemByElement(t)}).filter(function(t){return!!t});this._toggleFilterClasses({visible:[],hidden:n}),this._shrink(n),this.sort(),this.items=this.items.filter(function(t){return!n.includes(t)}),this._updateItemCount(),this.once(i.EventType.LAYOUT,function(){e._disposeItems(n),s.forEach(function(t){t.parentNode.removeChild(t)}),e._dispatch(i.EventType.REMOVED,{collection:s})})}}},{key:"getItemByElement",value:function(t){return this.items.find(function(e){return e.element===t})}},{key:"resetItems",value:function(){var t=this;this._disposeItems(this.items),this.isInitialized=!1,this.items=this._getItems(),this._initItems(this.items),this.once(i.EventType.LAYOUT,function(){t.setItemTransitions(t.items),t.isInitialized=!0}),this.filter(this.lastFilter)}},{key:"destroy",value:function(){this._cancelMovement(),window.removeEventListener("resize",this._onResize),this.element.classList.remove("shuffle"),this.element.removeAttribute("style"),this._disposeItems(this.items),this.items.length=0,this._transitions.length=0,this.options.sizer=null,this.element=null,this.isDestroyed=!0,this.isEnabled=!1}}],[{key:"getSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=window.getComputedStyle(t,null),n=s(t,"width",i),o=s(t,"height",i);return e&&(n+=s(t,"marginLeft",i)+s(t,"marginRight",i),o+=s(t,"marginTop",i)+s(t,"marginBottom",i)),{width:n,height:o}}},{key:"_skipTransitions",value:function(t,e){var i=t.map(function(t){var e=t.style,i=e.transitionDuration,s=e.transitionDelay;return e.transitionDuration="0ms",e.transitionDelay="0ms",{duration:i,delay:s}});e(),t[0].offsetWidth,t.forEach(function(t,e){t.style.transitionDuration=i[e].duration,t.style.transitionDelay=i[e].delay})}}]),i}();return $.ShuffleItem=T,$.ALL_ITEMS="all",$.FILTER_ATTRIBUTE_KEY="groups",$.EventType={LAYOUT:"shuffle:layout",REMOVED:"shuffle:removed"},$.Classes=S,$.FilterMode={ANY:"any",ALL:"all"},$.options={group:$.ALL_ITEMS,speed:250,easing:"cubic-bezier(0.4, 0.0, 0.2, 1)",itemSelector:"*",sizer:null,gutterWidth:0,columnWidth:0,delimiter:null,buffer:0,columnThreshold:.01,initialSort:null,throttle:y,throttleTime:300,staggerAmount:15,staggerAmountMax:150,useTransforms:!0,filterMode:$.FilterMode.ANY,isCentered:!1,roundTransforms:!0},$.Point=C,$.Rect=E,$.__sorter=n,$.__getColumnSpan=a,$.__getAvailablePositions=h,$.__getShortColumn=u,$.__getCenteredPositions=c,$});
//# sourceMappingURL=maps/scripts.non-core.desktop.min.js.map
